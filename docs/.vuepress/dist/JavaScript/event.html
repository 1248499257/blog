<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>事件以及事件对象 | Haha&#39;s Blog</title>
    <meta name="description" content="如果你工作很忙，除了你是真的很重要之外，更可能的原因是：你很弱。">
    <link rel="icon" href="/favicon.png">
    
    <link rel="preload" href="/assets/css/0.styles.44c85b99.css" as="style"><link rel="preload" href="/assets/js/app.e7885eb3.js" as="script"><link rel="preload" href="/assets/js/2.70a54c87.js" as="script"><link rel="preload" href="/assets/js/16.b31c154e.js" as="script"><link rel="prefetch" href="/assets/js/10.07bc07eb.js"><link rel="prefetch" href="/assets/js/11.db5f8864.js"><link rel="prefetch" href="/assets/js/12.27d906a3.js"><link rel="prefetch" href="/assets/js/13.9825ae71.js"><link rel="prefetch" href="/assets/js/14.cf78791a.js"><link rel="prefetch" href="/assets/js/15.bafe4925.js"><link rel="prefetch" href="/assets/js/17.3dbe8ffb.js"><link rel="prefetch" href="/assets/js/18.b44bcdf2.js"><link rel="prefetch" href="/assets/js/19.5a651edd.js"><link rel="prefetch" href="/assets/js/20.a01986d9.js"><link rel="prefetch" href="/assets/js/21.b7bc96b9.js"><link rel="prefetch" href="/assets/js/22.b91a83e3.js"><link rel="prefetch" href="/assets/js/23.aa6095aa.js"><link rel="prefetch" href="/assets/js/24.03d5e72b.js"><link rel="prefetch" href="/assets/js/25.8c94bfac.js"><link rel="prefetch" href="/assets/js/3.e9c6d2e2.js"><link rel="prefetch" href="/assets/js/4.03584ffe.js"><link rel="prefetch" href="/assets/js/5.848cfa58.js"><link rel="prefetch" href="/assets/js/6.ebf49902.js"><link rel="prefetch" href="/assets/js/7.d53a3126.js"><link rel="prefetch" href="/assets/js/8.98793c61.js"><link rel="prefetch" href="/assets/js/9.dbca7556.js">
    <link rel="stylesheet" href="/assets/css/0.styles.44c85b99.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Haha's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">dashboard</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Personal article" class="dropdown-title"><span class="title">Personal article</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JavaScript/" class="nav-link router-link-active">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/CSS/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/HTTP/" class="nav-link">HTTP</a></li><li class="dropdown-item"><!----> <a href="/Node/" class="nav-link">node</a></li><li class="dropdown-item"><!----> <a href="/Applets/" class="nav-link">小程序</a></li></ul></div></div><div class="nav-item"><a href="/Book/" class="nav-link">Book</a></div><div class="nav-item"><a href="/Resume/" class="nav-link">Resume</a></div><div class="nav-item"><a href="https://github.com/1248499257" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">dashboard</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Personal article" class="dropdown-title"><span class="title">Personal article</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JavaScript/" class="nav-link router-link-active">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/CSS/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/HTTP/" class="nav-link">HTTP</a></li><li class="dropdown-item"><!----> <a href="/Node/" class="nav-link">node</a></li><li class="dropdown-item"><!----> <a href="/Applets/" class="nav-link">小程序</a></li></ul></div></div><div class="nav-item"><a href="/Book/" class="nav-link">Book</a></div><div class="nav-item"><a href="/Resume/" class="nav-link">Resume</a></div><div class="nav-item"><a href="https://github.com/1248499257" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/JavaScript/" class="sidebar-link">对《你不知道的JS》的记录 一</a></li><li><a href="/JavaScript/youdontknowJS.html" class="sidebar-link">对《你不知道的JS》的记录 二</a></li><li><a href="/JavaScript/event.html" class="active sidebar-link">事件以及事件对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/event.html#什么是事件" class="sidebar-link">什么是事件</a></li><li class="sidebar-sub-header"><a href="/JavaScript/event.html#事件绑定的操作方式" class="sidebar-link">事件绑定的操作方式</a></li><li class="sidebar-sub-header"><a href="/JavaScript/event.html#事件对象的兼容问题" class="sidebar-link">事件对象的兼容问题</a></li><li class="sidebar-sub-header"><a href="/JavaScript/event.html#事件的默认行为" class="sidebar-link">事件的默认行为</a></li><li class="sidebar-sub-header"><a href="/JavaScript/event.html#事件的传播机制" class="sidebar-link">事件的传播机制</a></li><li class="sidebar-sub-header"><a href="/JavaScript/event.html#事件委托-事件代理" class="sidebar-link">事件委托(事件代理)</a></li><li class="sidebar-sub-header"><a href="/JavaScript/event.html#对比dom0-和-dom2的事件绑定" class="sidebar-link">对比DOM0 和 DOM2的事件绑定</a></li></ul></li><li><a href="/JavaScript/eventLoop.html" class="sidebar-link">异步相关以及 Event Loop</a></li><li><a href="/JavaScript/prototype.html" class="sidebar-link">原型</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="事件以及事件对象"><a href="#事件以及事件对象" class="header-anchor">#</a> 事件以及事件对象</h1> <h2 id="什么是事件"><a href="#什么是事件" class="header-anchor">#</a> 什么是事件</h2> <p>事件就是一件事情或者一个行为（对于元素来说，它的很多事件都是天生自带的），只要我们去操作这个元素，就会触发这些行为。</p> <p><strong>事件就是元素天生自带的行为，我们操作元素，就会触发相关的行为</strong></p> <h2 id="事件绑定的操作方式"><a href="#事件绑定的操作方式" class="header-anchor">#</a> 事件绑定的操作方式</h2> <ul><li><p>目的<br>
给当前元素的某个事件绑定方法（不管是DOM0还是DOM2），都是为了触发元素的相关行为，能做点事情（也就是把绑定的方法执行）；“不仅把方法执行了，而且浏览器还给方法传递了一个实参信息值===&gt;这个值就是事件对象”</p></li> <li><p>DOM 0级事件绑定</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>element<span class="token punctuation">.</span><span class="token function-variable function">onXXX</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><ul><li>DOM 2级事件绑定</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>element<span class="token punctuation">.</span><span class="token function">addEvenListener</span><span class="token punctuation">(</span><span class="token string">'xxx'</span> <span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">'onXXX'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token constant">IE</span> <span class="token number">6</span><span class="token operator">-</span><span class="token number">8</span>
</code></pre></div><ul><li>例子</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>box<span class="token punctuation">.</span>onclick <span class="token operator">=</span> <span class="token function">functinon</span> <span class="token punctuation">(</span> <span class="token parameter">ev</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><ol><li><p>定义一个形参EV用来接收方法执行的时候，浏览器传递的信息值（事件对象：MouseEvent鼠标事件对象、KeyboardEvent键盘事件对象、Event普通事件对象...）</p></li> <li><p>事件对象中记录了很多属性名和属性值，这些信息中包含了当前操作的基础信息，例如：鼠标点击位置的x/Y轴坐标，鼠标点击的是谁（事件源）等信息</p></li></ol> <h2 id="事件对象的兼容问题"><a href="#事件对象的兼容问题" class="header-anchor">#</a> 事件对象的兼容问题</h2> <ul><li><p>IE6-8<br>
在IE低版本浏览器中，浏览器执行绑定的方法，并没有把事件对象传递进来，此时ev === undefined，需要基于window.event 来获取（由于是全局属性，鼠标每次操作都会把上一次操作的值替换掉）</p></li> <li><p>解决方案-先手动设置<br>
低版本没有的属性，我们手动设置一下：按照自己有的先获取到值，然后赋值给标准对应的新属性。</p></li></ul> <h2 id="事件的默认行为"><a href="#事件的默认行为" class="header-anchor">#</a> 事件的默认行为</h2> <p>事件本身就是天生就有的，某些事件触发，即使你没有绑定方法，也会存在一些效果，这些默认的效果就是“事件的默认行为”</p> <p><strong>例如</strong></p> <ol><li><p>A标签的点击操作就存在默认行为</p> <ol><li><p>页面跳转</p></li> <li><p>锚点定位( HASH 定位)</p></li></ol></li> <li><p>input标签也有自己的默认行为</p> <ol><li><p>输入内容可以呈现到文本框中</p></li> <li><p>输入内容的时候会把之前输入的一些信息呈现出来（并不是所有浏览器和所有情况都有）</p></li></ol></li> <li><p>submit按钮</p> <ol><li>点击按钮页面会刷新</li></ol></li></ol> <p><strong>如何阻止默认行为</strong></p> <ol><li><p>直接return false</p></li> <li><p>ev.preventDefault ? ev.preventDefault( ) : ev.returnValue = false;</p></li></ol> <h2 id="事件的传播机制"><a href="#事件的传播机制" class="header-anchor">#</a> 事件的传播机制</h2> <ul><li>捕获阶段-capturing_phase</li></ul> <p>点击INNER的时候，首先会从最外层开始向内查找（找到操作的事件源），查找的目的是，构建出冒泡传播阶段需要传播的路线（查找就是按照HTML层级结构找的）</p> <ul><li>目标阶段-at_target</li></ul> <p>把事件源的相关操作行为触发（如果绑定了方法，则把方法执行）</p> <ul><li>冒泡阶段-bubbling_phase</li></ul> <p>按照捕获阶段规划的路线，自内而外，把当前事件源的祖先元素的相关事件行为依次触发（如果某一个祖先元素事件行为绑定了方法，则把方法执行，没绑定方法，行为触发了，什么都不做，继续向上传播即可）</p> <h2 id="事件委托-事件代理"><a href="#事件委托-事件代理" class="header-anchor">#</a> 事件委托(事件代理)</h2> <p>利用事件的<strong>冒泡传播机制</strong>，如果一个容器的后代元素中，很多元素的点击行为（其他事件行为也是）都要做一些处理，此时我们不需要在像以前一样一个一个获取一个个绑定，我们只需给容器的click绑定方法即可，这样不管点击的是哪一个后代元素，都会根据冒泡传播的传递机制，把容器的click行为触发，把对应的方法执行，根据事件源，我们可以知道点击的是谁，从而做不同的事情即可。</p> <h2 id="对比dom0-和-dom2的事件绑定"><a href="#对比dom0-和-dom2的事件绑定" class="header-anchor">#</a> 对比DOM0 和 DOM2的事件绑定</h2> <ul><li>DOM0 事件绑定</li></ul> <p>只允许给当前元素的某个事件行为绑定一个方法，多次绑定，后面绑定的内容会替换前面绑定的，以最后一次绑定的为主。原理：就是给元素的某一个事件私有属性赋值（浏览器会建立监听机制，当我们触发元素的某个行为，浏览器会自己把属性中赋的值去执行）</p> <ul><li>DOM2 事件绑定</li></ul> <ol><li><p>基于addEventListener 完成事件绑定，是基于“事件池机制”完成的。</p></li> <li><p>DOM2 可以给当前元素的某一个事件绑定多个不同的方法。既可以给这个事件绑定多个点击的方法：</p></li></ol> <div class="language-js extra-class"><pre class="language-js"><code>    element<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> fn1<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    element<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> fn2<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    element<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> fn3<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    element<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> fn1<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment">//注意如果事件池中以及存在则不会添加</span>
</code></pre></div><p>当我们触发element的点击行为后，浏览器会按照事件池中其存放增加的顺序依次把监听的方法给触发（浏览器只有一个事件池）</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/JavaScript/youdontknowJS.html" class="prev">对《你不知道的JS》的记录 二</a></span> <span class="next"><a href="/JavaScript/eventLoop.html">异步相关以及 Event Loop</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.e7885eb3.js" defer></script><script src="/assets/js/2.70a54c87.js" defer></script><script src="/assets/js/16.b31c154e.js" defer></script>
  </body>
</html>
